# คู่มือการติดตั้งระบบบน USB (USB Installation Guide)

เอกสารนี้จะอธิบายขั้นตอนการนำระบบ Babi Portal ไปติดตั้งและรันบน Flash Drive อย่างละเอียด

## สิ่งที่ต้องเตรียม (Prerequisites)
1. **USB Flash Drive**: พื้นที่ว่างอย่างน้อย 4GB (แนะนำ Format เป็น FAT32 หรือ exFAT เพื่อรองรับทั้ง Mac และ Windows)
2. **เครื่องคอมพิวเตอร์ Windows**: แนะนำให้ใช้ Windows ในการเตรียมไฟล์สำหรับ USB set นี้ (เนื่องจาก `start.bat` ออกแบบมาสำหรับ Windows autorun)
3. **Internet**: สำหรับดาวน์โหลด Node.js และ Library ครั้งแรก
4. **ไฟล์โปรเจกต์**: โฟลเดอร์ `iconnext.babi` นี้

---

## ขั้นตอนที่ 1: เตรียมไฟล์ Node.js (Portable Runtime)

ระบบต้องการตัวรันโปรแกรม (Node.js) ฝังไปใน USB เพื่อให้สามารถใช้งานได้ทันทีโดยไม่ต้องติดตั้งโปรแกรมลงเครื่องคอมพิวเตอร์

1. **ดาวน์โหลด Node.js Binaries**:
   - ไปที่ [https://nodejs.org/en/download/prebuilt-binaries](https://nodejs.org/en/download/prebuilt-binaries)
   - เลือก OS: **Windows**
   - เลือก Architecture: **x64**
   - กดดาวน์โหลด (จะได้ไฟล์ .zip)

2. **ติดตั้งลงในโปรเจกต์**:
   - เข้าไปที่โฟลเดอร์ `iconnext.babi`
   - ตรวจสอบว่ามีโฟลเดอร์ `bin` -> `win` (ถ้าไม่มีให้สร้าง: `New Folder` -> ตั้งชื่อ `bin` -> เข้าไปสร้าง `win`)
   - เปิดไฟล์ .zip ที่โหลดมา
   - ลากไฟล์ **ทั้งหมด** ใน zip (เช่น `node.exe`, `npm`, `node_modules` ฯลฯ) ไปใส่ในโฟลเดอร์ `iconnext.babi\bin\win\`
   - **สำคัญ**: ตรวจสอบว่าต้องมีไฟล์ `iconnext.babi\bin\win\node.exe` อยู่จริง (ไม่ใช่ซ้อนอยู่ในโฟลเดอร์อีกชั้น)

---

## ขั้นตอนที่ 2: เตรียม USB Drive

1. เสียบใช้งาน USB Flash Drive
2. ก๊อปปี้โฟลเดอร์ `iconnext.babi` ทั้งหมด ไปวางที่ **Root (หน้าแรก)** ของ USB
   - path ควรจะเป็นเหมือน `E:\iconnext.babi`

---

## ขั้นตอนที่ 3: ติดตั้งและ Build ระบบ

เนื่องจากระบบต้องใช้ Library (better-sqlite3) ที่ต้อง Compile ให้ตรงกับ Windows, ให้ทำขั้นตอนนี้บนเครื่อง Windows:

1. เปิดเข้าไปใน USB: `E:\iconnext.babi`
2. ดับเบิ้ลคลิกไฟล์ **`setup_win.bat`** (ไฟล์นี้เราเตรียมไว้ให้แล้ว)
   - สคริปต์จะตรวจสอบว่ามี `node.exe` หรือยัง
   - สคริปต์จะทำการติดตั้ง Library (`npm install`)
   - สคริปต์จะทำการ Build โปรแกรม (`npm run build`)
3. รอจนกว่าจะขึ้นว่า **Setup Complete!**

*หมายเหตุ: ขั้นตอนนี้ทำแค่ครั้งแรกครั้งเดียว หรือเมื่อมีการแก้โค้ด*

---

## ขั้นตอนการใช้งานจริง (Usage)

เมื่อเตรียม USB เสร็จแล้ว สามารถนำไปเสียบเครื่องไหนก็ได้:

1. เสียบ USB
2. ดับเบิ้ลคลิก **`start_win.bat`** (หรือ `start.bat`)
3. รอสักครู่ โปรแกรมจะเปิดหน้าเว็บขึ้นมาเอง

---

## การใช้งานบนระบบปฏิบัติการต่างกัน (Cross-Platform Nuances)

**คำถามยอดฮิต**: *เตรียมไฟล์บน Mac แล้วเอาไปใช้บน Windows ได้เลยไหม?*

**คำตอบ**: **ไม่ได้ 100% ครับ**
- โค้ด (Source Code) ใช้งานร่วมกันได้
- แต่ **Library (node_modules)** โดยเฉพาะตัวจัดการฐานข้อมูล (`better-sqlite3`) จะถูกสร้างมาเฉพาะสำหรับ OS นั้นๆ (เช่น ถ้าสั่ง `npm install` บน Mac จะได้ไฟล์ของ Mac, เอาไปเสียบ Windows จะเปิดไม่ติด)

### วิธีปฏิบัติที่แนะนำ (Best Practice)
1. **ขั้นตอนเตรียมไฟล์**: ทำบนเครื่องไหนก็ได้ (Mac หรือ Windows) เพื่อก๊อปปี้ไฟล์ลง USB
2. **ขั้นตอนติดตั้ง (Setup)**: 
   - ถ้าจะเอาไปใช้บน **Windows**: ให้เอา USB ไปเสียบเครื่อง Windows แล้วรัน `setup_win.bat`
   - ถ้าอยากให้ใช้ได้บน Mac ด้วย: ให้รัน `npm install` บน Mac ด้วย (แต่ระวัง! การทำแบบนี้ทับกันไปมาอาจทำให้ไฟล์ของอีกฝั่งพัง)
   
**สรุป**: เพื่อความเสถียรที่สุด **ให้รัน `setup_win.bat` บนเครื่อง Windows ที่จะใช้งาน (หรือเครื่อง Windows เครื่องแรกสักเครื่องก่อน)** เพื่อให้ USB พร้อมสำหรับ Windows ครับ


## การแก้ไขปัญหาเบื้องต้น (Troubleshooting)

- **ถ้าขึ้นว่า "node.exe not found"**:
  - เช็คว่าวางไฟล์ใน `bin\win` ถูกต้องไหม (ต้องไม่ซ้อนโฟลเดอร์)
- **ถ้าเปิดเว็บไม่ขึ้น**:
  - ลองเปิดเข้าไปที่โฟลเดอร์ `app` แล้วเปิด Command Prompt พิมพ์ `..\bin\win\node app\server.js` หรือ `npm start` เพื่อดู Error
